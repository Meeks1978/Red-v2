services:
  red:
    build: .
    container_name: red-v2-copilot
    restart: unless-stopped
    networks:
      - openwebui_meeks
    ports:
      - "127.0.0.1:8111:8111"
    expose:
      - "8111"
    environment:
      - DEFAULT_WORLD_STATE=DISARMED
      - SWITCH_SELF_UPGRADE=false
      - SWITCH_ALWAYS_ON_AGENTS=false
      - SWITCH_COEXISTENCE=false
      - ALLOW_SHELL_EXEC=false
      - ALLOW_UI_AUTOMATION=false
      - ALLOW_DOCKER_CONTROL=false
      - CONTROL_PLANE_URL=http://meeks-control-plane:8088
      - APPROVAL_SIGNING_SECRET=8c7f6b9e4f2a1d3c9a0e5b7d2f4c8e1a
      - APPROVAL_TOKEN_TTL_SEC=300

networks:
  openwebui_meeks:
    external: true
